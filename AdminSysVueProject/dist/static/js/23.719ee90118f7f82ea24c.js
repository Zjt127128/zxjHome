webpackJsonp([23],{FpsV:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("woOf"),r=s.n(a),l=s("FWz8"),o=s("xT6B"),n={receiveNote:null},i={name:"handleCancelOrder",data:function(){return{message:{title:"拒绝退货申请通知",content:null,type:1,userId:null,storeId:null},id:null,order:r()({},n),dishList:null,messageDialogVisible:!1}},created:function(){this.id=this.$route.query.id,this.getDetail(this.id)},computed:{totalAmount:function(){return null!=this.order?this.order.dishRealPrice*this.order.dishCount:0}},filters:{formatTime:function(t){if(null==t||""===t)return"暂无数据";var e=new Date(t);return Object(o.a)(e,"yyyy-MM-dd hh:mm:ss")}},methods:{handleSendMessage:function(){var t=this;this.message.userId=this.order.userId,this.message.storeId=this.order.storeId,Object(l.g)(this.order.id,-1,this.order.applyTable.oldOrderType).then(function(e){t.$message({type:"success",message:"操作成功!"}),Object(l.f)(t.message).then(function(e){t.$router.back()}).catch(function(e){t.$router.back()})})},getDetail:function(t){var e=this;Object(l.c)(t).then(function(t){console.log("order == ",t.data),e.order=t.data,e.order.auctualPay=e.getAuctualPay(e.order)})},getAuctualPay:function(t){var e=t.otherFee+t.originalPrice-t.shopDiscount-t.couponDiscount;console.log("app",e);var s=t.consumeType,a=t.paymentStatus;return 1==s?t.margin:a?e:0},handleViewOrder:function(){this.$router.push({path:"/order-ms/orderDetail",query:{id:this.order.orderId}})},handleY:function(){var t=this,e=this.order;this.$confirm("是否要确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.g)(e.id,e.consumeType,e.orderType).then(function(e){t.$message({type:"success",message:"操作成功!"}),t.$router.back()})})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-container"},[s("el-card",{attrs:{shadow:"never"}},[s("span",{staticClass:"font-title-medium"},[t._v("取消订单信息")]),t._v(" "),s("el-table",{ref:"dishTable",staticClass:"standard-margin",attrs:{border:"",data:t.order.dishOrders}},[s("el-table-column",{attrs:{label:"菜品编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-small"},[t._v(t._s(e.row.dishId))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"菜品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-small"},[t._v(t._s(e.row.dishName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"菜品单价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"font-small"},[t._v("￥"+t._s(e.row.dishPrice))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.dishNum))]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"小计",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.dishNum*e.row.dishPrice))]}}])})],1),t._v(" "),s("div",{staticStyle:{float:"right","margin-top":"15px","margin-bottom":"15px"}},[s("span",{staticClass:"font-title-medium"},[t._v("合计：")]),t._v(" "),s("span",{staticClass:"font-title-medium color-danger"},[t._v("￥"+t._s(t.order.originalPrice))])])],1),t._v(" "),s("el-card",{staticClass:"standard-margin",attrs:{shadow:"never"}},[s("span",{staticClass:"font-title-medium"},[t._v("服务单信息")]),t._v(" "),s("div",{staticClass:"form-container-border"},[s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("订单编号")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v(t._s(t.order.id))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("申请状态")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("正在申请")])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("申请时间")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v(t._s(t._f("formatTime")(t.order.createTime)))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("申请人ID")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v(t._s(t.order.applyTable.userId))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("联系电话")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v(t._s(t.order.applyTable.phone))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("退货原因")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v(t._s(t.order.applyTable.reason))])],1)],1),t._v(" "),s("div",{staticClass:"form-container-border"},[s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("订单总额")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("￥"+t._s(t.order.originalPrice))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("店铺折扣")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("￥"+t._s(t.order.shopDiscount))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("使用优惠券")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("￥"+t._s(t.order.couponDiscount))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("已支付保证金")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("￥"+t._s(t.order.margin))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("其他费用")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("￥"+t._s(t.order.otherFee))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",attrs:{span:6}},[t._v("实际支付")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",attrs:{span:18}},[t._v("￥"+t._s(t.order.auctualPay))])],1),t._v(" "),s("el-row",[s("el-col",{staticClass:"form-border form-left-bg font-small",staticStyle:{height:"52px","line-height":"32px"},attrs:{span:6}},[t._v("\n          确认退款金额\n        ")]),t._v(" "),s("el-col",{staticClass:"form-border font-small",staticStyle:{height:"52px"},attrs:{span:18}},[t._v("\n          ￥\n          "),s("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{size:"small",disabled:"",placeholder:t.order.auctualPay}})],1)],1)],1),t._v(" "),s("div",{staticStyle:{"margin-top":"15px","text-align":"center"}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleY}},[t._v("同意该申请")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.messageDialogVisible=!0}}},[t._v("拒绝该申请")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"填写拒绝理由",visible:t.messageDialogVisible,width:"40%"},on:{"update:visible":function(e){t.messageDialogVisible=e}}},[s("el-form",{ref:"receiverInfoForm",attrs:{model:t.message,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"标题："}},[s("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.message.title,callback:function(e){t.$set(t.message,"title",e)},expression:"message.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"内容："}},[s("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.message.content,callback:function(e){t.$set(t.message,"content",e)},expression:"message.content"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.messageDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.handleSendMessage}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(i,c,!1,function(t){s("briO")},"data-v-009f853c",null);e.default=d.exports},briO:function(t,e){}});
//# sourceMappingURL=23.719ee90118f7f82ea24c.js.map